"use strict";(self.webpackChunkSoundSieve_Front=self.webpackChunkSoundSieve_Front||[]).push([[488],{8488:(N,d,o)=>{o.r(d),o.d(d,{SearchModule:()=>R});var c=o(4755),i=o(3938),e=o(1902),p=o(4004),u=o(2340),g=o(4872),f=o(3144);const m=u.N.baseUrl;let _=(()=>{class n{constructor(t){this._http=t}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}transformUsers(t){return t.map(s=>new g.n(s.name,s.email,"",s.img,s.google,s.role,s.uid))}transformSheets(t){return t}globalSearch(t){return this._http.get(`${m}/search/all/${t}`,this.headers)}search(t,s){return this._http.get(`${m}/search/collection/${t}/${s}`,this.headers).pipe((0,p.U)(h=>{switch(t){case"users":return this.transformUsers(h.results);case"sheets":return this.transformSheets(h.results);default:return[]}}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=o(3618);const l=u.N.baseUrl;let v=(()=>{class n{transform(t){return t?t.includes("https")?t:t?`${l}/upload/users/${t}`:`${l}/upload/users/no-image`:`${l}/upload/users/no-image`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"image",type:n,pure:!0}),n})();function M(n,r){if(1&n&&(e.TgZ(0,"li",17),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function O(n,r){if(1&n&&(e.TgZ(0,"div",2),e._UZ(1,"img",3),e.TgZ(2,"div",4)(3,"h5",5),e._uU(4),e.qZA(),e.TgZ(5,"p",6),e._uU(6),e.qZA(),e.TgZ(7,"div",7)(8,"h5",8),e._uU(9,"Instruments:"),e.qZA(),e.TgZ(10,"ul",9),e.YNc(11,M,2,1,"li",10),e.qZA()(),e.TgZ(12,"div",11)(13,"div",12),e._UZ(14,"img",13),e.TgZ(15,"p",14),e._uU(16,"223"),e.qZA()(),e.TgZ(17,"div",15),e._UZ(18,"img",16),e.TgZ(19,"p",14),e._uU(20,"1.4k"),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.cSheet.name),e.xp6(2),e.Oqu(t.cSheet.author.firstName+" "+t.cSheet.author.lastName),e.xp6(5),e.Q6J("ngForOf",t.cSheet.instruments)}}function x(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.goToUser(a.cUser))}),e._UZ(1,"img",19),e.ALo(2,"image"),e.TgZ(3,"div",20)(4,"h5",5),e._uU(5),e.qZA(),e.TgZ(6,"p",21),e._uU(7),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",e.lcZ(2,4,t.cUser.img),e.LSH)("alt",t.cUser.firstName),e.xp6(4),e.Oqu(t.cUser.username),e.xp6(2),e.Oqu(t.cUser.firstName+" "+t.cUser.lastName)}}let S=(()=>{class n{constructor(t){this._router=t}ngOnChanges(t){this.cSheet&&t.cSheet&&t.cSheet.currentValue!=t.cSheet.previousValue&&(this.cSheet=t.cSheet.currentValue),this.cUser&&t.cUser&&t.cUser.currentValue!=t.cUser.previousValue&&(this.cUser=t.cUser.currentValue)}goToUser(t){this._router.navigateByUrl(`es/profile/${t.uid}`)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-card"]],inputs:{cSheet:"cSheet",cUser:"cUser"},features:[e.TTD],decls:2,vars:2,consts:[["class","card sheet overflow-hidden",4,"ngIf"],["class","card user overflow-hidden",3,"click",4,"ngIf"],[1,"card","sheet","overflow-hidden"],["src","./../../../../assets/images/example.jpg","alt","...",1,"rounded","h-100"],[1,"card-body","ps-2","d-flex","flex-column","h-auto"],[1,"card-title"],[1,"card-author"],[1,"card-intruments"],[1,"card-intruments-title"],[1,"ps-2"],["class","p-0 m-0",4,"ngFor","ngForOf"],[1,"card-interactions","flex-shrink-1","d-flex","flex-wrap","justify-content-end","mt-5"],[1,"card-likes","gx-3","d-flex","flex-wrap","align-items-center"],["src","./../../../../assets/images/svg/like.svg","alt","like-icon",1,"like-icon","me-2"],[1,"align-middle","m-0"],[1,"card-views","gx-3","d-flex","flex-wrap","align-items-center"],["src","./../../../../assets/images/svg/view.svg","alt","view-icon",1,"view-icon","me-2"],[1,"p-0","m-0"],[1,"card","user","overflow-hidden",3,"click"],["referrerpolicy","no-referrer",1,"rounded-circle","user-img",3,"src","alt"],[1,"card-body"],[1,"card-author","w-100"]],template:function(t,s){1&t&&(e.YNc(0,O,21,3,"div",0),e.YNc(1,x,8,6,"div",1)),2&t&&(e.Q6J("ngIf",s.cSheet),e.xp6(1),e.Q6J("ngIf",s.cUser))},dependencies:[c.sg,c.O5,v],styles:[".card[_ngcontent-%COMP%]{background-color:transparent!important;border:none!important}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{height:100%}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-author[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-interactions[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-intruments[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-intruments-title[_ngcontent-%COMP%]{color:#fefefe;font-size:1rem}.card.sheet[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:500}@media (min-width: 600px){.card.sheet[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.4rem}}.card.sheet[_ngcontent-%COMP%]   .card-author[_ngcontent-%COMP%]{font-weight:300}@media (min-width: 600px){.card.sheet[_ngcontent-%COMP%]   .card-author[_ngcontent-%COMP%]{font-size:1.2rem}}.card.sheet[_ngcontent-%COMP%]   .card-intruments[_ngcontent-%COMP%]   .card-intruments-title[_ngcontent-%COMP%]{font-weight:500}@media (min-width: 600px){.card.sheet[_ngcontent-%COMP%]   .card-intruments[_ngcontent-%COMP%]   .card-intruments-title[_ngcontent-%COMP%]{font-size:1.2rem}}.card.sheet[_ngcontent-%COMP%]   .card-intruments[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;font-weight:300;padding:0;margin:0}@media (min-width: 600px){.card.sheet[_ngcontent-%COMP%]   .card-intruments[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.2rem}}.card.sheet[_ngcontent-%COMP%]   .card-interactions[_ngcontent-%COMP%]{gap:1rem}.card.sheet[_ngcontent-%COMP%]   .card-interactions[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:12px}.card.sheet[_ngcontent-%COMP%]   .card-interactions[_ngcontent-%COMP%]   img.like-icon[_ngcontent-%COMP%]{margin-bottom:.3rem}.card.sheet[_ngcontent-%COMP%]   .card-interactions[_ngcontent-%COMP%]   img.view-icon[_ngcontent-%COMP%]{margin-bottom:.1rem}.card.user[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{margin:0 auto;background-size:contain;width:80px;height:80px}.card.user[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{text-align:center;font-size:1.4rem;font-weight:500}.card.user[_ngcontent-%COMP%]   .card-author[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;font-weight:300}"]}),n})();function P(n,r){1&n&&(e.TgZ(0,"div",7)(1,"p",8),e._uU(2," The search returns no results "),e.qZA()())}function U(n,r){1&n&&e._UZ(0,"app-card",12),2&n&&e.Q6J("cSheet",r.$implicit)}function Z(n,r){if(1&n&&(e.TgZ(0,"div",9)(1,"h3"),e._uU(2,"Score sheets"),e.qZA(),e.TgZ(3,"div",10),e.YNc(4,U,1,1,"app-card",11),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.resultSheets)}}function w(n,r){1&n&&e._UZ(0,"app-card",16),2&n&&e.Q6J("cUser",r.$implicit)}function T(n,r){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,w,1,1,"app-card",15),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.resultUsers)}}function y(n,r){if(1&n&&(e.TgZ(0,"div",13)(1,"h3"),e._uU(2,"Users"),e.qZA(),e.YNc(3,T,2,1,"div",14),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.resultUsers)}}const A=[{path:"",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-main"]],decls:1,vars:0,template:function(t,s){1&t&&e._UZ(0,"router-outlet")},dependencies:[i.lC]}),n})(),children:[{path:":query",component:(()=>{class n{constructor(t,s){this._activatedRoute=t,this._searchService=s,this.searchPlaceholder="Search...",this.resultSheets=[],this.resultUsers=[],this.offset=0,this.limit=10}ngOnInit(){this._activatedRoute.params.subscribe(({query:t})=>{this.globalSearch(t)})}globalSearch(t){this.resultUsers=[],this.resultSheets=[],this._searchService.globalSearch(t).subscribe(s=>{this.resultUsers=s.users,this.resultSheets=s.sheets})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.gz),e.Y36(_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-result-list"]],decls:8,vars:4,consts:[[1,"container","mt-5"],[3,"placeholder"],[1,"my-5"],[1,"container"],["class","alert alert-secondary",4,"ngIf"],["class","sheetsResult mt-5",4,"ngIf"],["class","usersResult mt-5",4,"ngIf"],[1,"alert","alert-secondary"],[1,"mb-0"],[1,"sheetsResult","mt-5"],[1,"results","row","row-cols-1","row-cols-sm-2","row-cols-md-5","row-cols-xl-10","row-cols-xxl-8","d-flex","mx-0","animated","fadeIn","fast"],["class","col",3,"cSheet",4,"ngFor","ngForOf"],[1,"col",3,"cSheet"],[1,"usersResult","mt-5"],["class","results row row-cols-1 row-cols-sm-2 row-cols-md-5 row-cols-xl-10 row-cols-xxl-8 d-flex mx-0 animated fadeIn fast",4,"ngIf"],["class","col",3,"cUser",4,"ngFor","ngForOf"],[1,"col",3,"cUser"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-search-bar",1),e.TgZ(2,"h3",2),e._uU(3,"Aqui irian los filtros de busqueda"),e.qZA()(),e.TgZ(4,"div",3),e.YNc(5,P,3,0,"div",4),e.YNc(6,Z,5,1,"div",5),e.YNc(7,y,4,1,"div",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("placeholder",s.searchPlaceholder),e.xp6(4),e.Q6J("ngIf",0===s.resultSheets.length&&0===s.resultUsers.length),e.xp6(1),e.Q6J("ngIf",s.resultSheets.length>0),e.xp6(1),e.Q6J("ngIf",s.resultUsers.length>0))},dependencies:[c.sg,c.O5,C.N,S],styles:[".row[_ngcontent-%COMP%]{width:100%;margin-top:3rem!important;margin-bottom:7rem!important;row-gap:5rem}"]}),n})()},{path:"details/:id",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-music-sheet-details"]],decls:2,vars:0,template:function(t,s){1&t&&(e.TgZ(0,"p"),e._uU(1,"music-sheet-details works!"),e.qZA())}}),n})()}]}];let F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[i.Bz.forChild(A),i.Bz]}),n})();var I=o(1469);let R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,F,I.m]}),n})()}}]);